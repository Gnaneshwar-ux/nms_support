<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.collections.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<?import javafx.scene.control.Spinner?> <!-- Import standard JavaFX Spinner -->

<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            stylesheets="@../../styles/light/tabs/datastore-dump.css"
            fx:controller="com.nms.support.nms_support.controller.DatastoreDumpController"
            prefHeight="400.0" prefWidth="600.0">

    <VBox fx:id="mainContainer" spacing="10.0" AnchorPane.topAnchor="10.0" AnchorPane.bottomAnchor="10.0"
          AnchorPane.leftAnchor="10.0" AnchorPane.rightAnchor="10.0">

        <!-- Datastore User Field and Action Buttons on same line -->
        <HBox alignment="CENTER_LEFT" spacing="10">
            <Label text="Datastore User:" styleClass="label-common"/>
            <TextField fx:id="datastoreUserField" styleClass="text-field" prefWidth="200"/>
            <Button text="Open Report" styleClass="button-common" minWidth="90" fx:id="openReportButton"/>
            <Button text="Load" styleClass="button-common" fx:id="loadButton"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label fx:id="lastGeneratedLabel" text="" styleClass="label-common" alignment="CENTER_RIGHT"/>
        </HBox>

        <!-- Filter Text Fields for Each Column -->
        <HBox alignment="CENTER_LEFT" spacing="4" styleClass="filter-container">
            <TextField fx:id="column1Filter" promptText="Filter Tool" styleClass="filter-field" HBox.hgrow="ALWAYS"/>
            <TextField fx:id="column2Filter" promptText="Filter DataStore" styleClass="filter-field" HBox.hgrow="ALWAYS"/>
            <TextField fx:id="column3Filter" promptText="Filter Column" styleClass="filter-field" HBox.hgrow="ALWAYS"/>
            <TextField fx:id="column4Filter" promptText="Filter Type" styleClass="filter-field" HBox.hgrow="ALWAYS"/>
            <TextField fx:id="column5Filter" promptText="Filter Value" styleClass="filter-field" HBox.hgrow="ALWAYS"/>
            <!-- Invisible spacer to account for scrollbar width -->
            <Region styleClass="scrollbar-spacer"/>
        </HBox>

        <!-- TableView Section with Loading Overlay -->
        <StackPane VBox.vgrow="ALWAYS">
            <TableView fx:id="datastoreTable" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="column1" text="Tool"/>
                    <TableColumn fx:id="column2" text="DataStore"/>
                    <TableColumn fx:id="column3" text="Column"/>
                    <TableColumn fx:id="column4" text="Type"/>
                    <TableColumn fx:id="column5" text="Value"/>
                </columns>
            </TableView>
            <StackPane fx:id="overlayPane" visible="false" styleClass="loading-overlay">
                <VBox alignment="CENTER" spacing="20" styleClass="loading-container">
                    <ProgressIndicator fx:id="loadingIndicator" maxWidth="60" maxHeight="60" styleClass="loading-spinner" />
                    <VBox alignment="CENTER" spacing="8">
                        <Label fx:id="loadingTitle" text="Fetching Data from Server..." styleClass="loading-title" />
                        <Label fx:id="loadingMessage" text="Connecting to datastore..." styleClass="loading-message" />
                        <ProgressBar fx:id="loadingProgress" prefWidth="300" styleClass="loading-progress" />
                    </VBox>
                </VBox>
            </StackPane>
        </StackPane>
    </VBox>
</AnchorPane>
